<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/gfn-icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GeForce NOW</title>
    <link rel="stylesheet" href="/src/styles/main.css" />
  </head>
  <body>
    <div id="app">
      <!-- Header -->
      <header id="app-header">
        <div class="header-left">
          <img src="/gfn-logo.svg" alt="GeForce NOW" class="logo" />
          <nav class="main-nav">
            <a href="#" class="nav-item active" data-view="home">Home</a>
            <a href="#" class="nav-item" data-view="library">My Library</a>
            <a href="#" class="nav-item" data-view="store">Store</a>
          </nav>
        </div>
        <div class="header-right">
          <div class="search-container">
            <input type="text" id="search-input" placeholder="Search games..." />
          </div>
          <div class="user-section">
            <button id="login-btn" class="btn btn-primary">Sign In</button>
            <div id="user-menu" class="user-menu hidden">
              <div class="user-info">
                <span id="user-name"></span>
                <div class="tier-info">
                  <span id="user-tier" class="user-tier"></span>
                  <span id="user-time" class="user-time"></span>
                </div>
              </div>
              <button id="logout-btn" class="btn btn-small">Logout</button>
            </div>
          </div>
          <button id="settings-btn" class="icon-btn" title="Settings">⚙</button>
        </div>
      </header>

      <!-- Main Content -->
      <main id="main-content">
        <!-- Home View -->
        <section id="home-view" class="view active">
          <div class="hero-section">
            <div class="hero-content">
              <h1>Welcome to GeForce NOW</h1>
              <p>Play your favorite PC games instantly</p>
            </div>
          </div>

          <div class="content-section">
            <h2>Featured Games</h2>
            <div id="featured-games" class="games-grid"></div>
          </div>

          <div class="content-section">
            <h2>Recently Added</h2>
            <div id="recent-games" class="games-grid"></div>
          </div>

          <div class="content-section">
            <h2>Free to Play</h2>
            <div id="free-games" class="games-grid"></div>
          </div>
        </section>

        <!-- Library View -->
        <section id="library-view" class="view hidden">
          <div class="library-header">
            <h1>My Library</h1>
            <div class="library-filters">
              <select id="store-filter">
                <option value="all">All Stores</option>
                <option value="steam">Steam</option>
                <option value="epic">Epic Games</option>
                <option value="ubisoft">Ubisoft</option>
              </select>
              <button id="sync-library-btn" class="btn">Sync Library</button>
            </div>
          </div>

          <div class="content-section">
            <h2>Recently Played</h2>
            <div id="recently-played" class="games-grid"></div>
          </div>

          <div class="content-section">
            <h2>My Games</h2>
            <div id="my-games" class="games-grid"></div>
          </div>
        </section>

        <!-- Store View -->
        <section id="store-view" class="view hidden">
          <div class="store-header">
            <h1>All Games</h1>
            <div class="store-filters">
              <select id="genre-filter">
                <option value="all">All Genres</option>
                <option value="action">Action</option>
                <option value="rpg">RPG</option>
                <option value="strategy">Strategy</option>
                <option value="sports">Sports</option>
              </select>
              <select id="sort-filter">
                <option value="popular">Popular</option>
                <option value="new">Newest</option>
                <option value="name">A-Z</option>
              </select>
            </div>
          </div>
          <div id="all-games" class="games-grid"></div>
          <div id="load-more" class="load-more">
            <button id="load-more-btn" class="btn">Load More</button>
          </div>
        </section>
      </main>

      <!-- Game Detail Modal -->
      <div id="game-modal" class="modal hidden">
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          <div id="game-detail"></div>
        </div>
      </div>

      <!-- Login Modal -->
      <div id="login-modal" class="modal hidden">
        <div class="modal-content login-modal-content">
          <button class="modal-close">&times;</button>
          <h2>Sign In</h2>
          <div class="login-options">
            <button id="nvidia-login-btn" class="btn btn-primary btn-large login-option">
              <span class="login-icon">&#9733;</span>
              Sign in with NVIDIA
            </button>
            <div class="login-divider">
              <span>or</span>
            </div>
            <button id="token-login-btn" class="btn btn-secondary btn-large login-option">
              <span class="login-icon">&#128273;</span>
              Enter Token Manually
            </button>
          </div>
          <div id="token-entry" class="token-entry hidden">
            <p class="token-instructions">
              1. Go to <a href="https://play.geforcenow.com" target="_blank">play.geforcenow.com</a> and sign in<br>
              2. Press F12 to open DevTools<br>
              3. Go to Application > Local Storage<br>
              4. Copy the NVAUTHTOKEN value
            </p>
            <textarea id="token-input" placeholder="Paste your NVAUTHTOKEN here..."></textarea>
            <button id="submit-token-btn" class="btn btn-primary">Submit Token</button>
          </div>
        </div>
      </div>

      <!-- Settings Modal -->
      <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          <h2>Settings</h2>
          <div class="settings-form">
            <div class="setting-group">
              <label>Resolution</label>
              <select id="resolution-setting">
                <option value="1280x720">1280x720 (720p)</option>
                <option value="1920x1080" selected>1920x1080 (1080p)</option>
                <option value="2560x1440">2560x1440 (1440p)</option>
                <option value="3840x2160">3840x2160 (4K)</option>
              </select>
            </div>
            <div class="setting-group">
              <label>Frame Rate</label>
              <select id="fps-setting">
                <option value="30">30 FPS</option>
                <option value="60" selected>60 FPS</option>
                <option value="120">120 FPS</option>
                <option value="240">240 FPS</option>
                <option value="360">360 FPS</option>
              </select>
            </div>
            <div class="setting-group">
              <label>Video Codec</label>
              <select id="codec-setting">
                <option value="h264">H.264 (Best Compatibility)</option>
                <option value="h265">H.265/HEVC (Better Quality)</option>
                <option value="av1">AV1 (Best Quality, High CPU)</option>
              </select>
            </div>
            <div class="setting-group">
              <label>Max Bitrate: <span id="bitrate-value">Unlimited</span></label>
              <input type="range" id="bitrate-setting" min="20" max="200" value="200" step="10" />
              <div class="bitrate-labels">
                <span>20 Mbps</span>
                <span>Unlimited</span>
              </div>
            </div>
            <div class="setting-group">
              <label>Preferred Region</label>
              <select id="region-setting">
                <option value="auto">Auto (Lowest Ping)</option>
              </select>
            </div>
            <div class="setting-group">
              <label>
                <input type="checkbox" id="telemetry-setting" checked />
                Disable Telemetry
              </label>
            </div>
            <div class="setting-group">
              <label>
                <input type="checkbox" id="discord-setting" />
                Enable Discord Rich Presence
              </label>
            </div>
            <div class="setting-group">
              <label>Custom Proxy (optional)</label>
              <input type="text" id="proxy-setting" placeholder="http://proxy:port" />
            </div>
            <button id="save-settings-btn" class="btn btn-primary">Save Settings</button>
          </div>
        </div>
      </div>

      <!-- Status Bar -->
      <footer id="status-bar">
        <div class="status-left">
          <span id="connection-status">● Connected</span>
        </div>
        <div class="status-right">
          <span id="server-info">Server: Auto</span>
          <span id="ping-info">Ping: --ms</span>
        </div>
      </footer>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
